<h1><%= @event.title %></h1>

<p><strong>Description :</strong> <%= @event.description %></p>
<p><strong>Date :</strong> <%= @event.start_date.strftime("%d/%m/%Y Ã  %H:%M") %></p>
<p><strong>DurÃ©e :</strong> <%= @event.duration %> minutes</p>
<p><strong>Lieu :</strong> <%= @event.location %></p>

<p>
  <strong>Prix :</strong>
  <% if @event.is_free? %>
    Gratuit ğŸ‰
  <% else %>
    <%= number_to_currency(@event.price / 100.0, unit: "â‚¬") %>
  <% end %>
</p>

<hr>

<% if user_signed_in? %>

  <% if current_user == @event.admin %>
    <!-- L'organisateur -->
    <p>Tu es l'organisateur de cet Ã©vÃ©nement.</p>

    <%= link_to "Mon espace Ã©vÃ©nement", event_attendances_path(@event), class: "btn btn-secondary" %>

    <%= link_to "Modifier l'Ã©vÃ©nement", edit_event_path(@event), class: "btn btn-warning" %>

    <%= button_to "Supprimer l'Ã©vÃ©nement", event_path(@event), method: :delete, data: { confirm: "Tu es sÃ»r ?" }, class: "btn btn-danger mt-2" %>

  <% elsif @event.attendances.exists?(user: current_user) %>
    <!-- DÃ©jÃ  participant -->
    <p class="text-success">Tu participes dÃ©jÃ  Ã  cet Ã©vÃ©nement !</p>

  <% else %>
    <!-- Utilisateur connectÃ©, non admin, non participant -->
    <% if @event.is_free? %>
      <%= link_to "Rejoindre l'Ã©vÃ©nement", new_event_attendance_path(@event), class: "btn btn-primary" %>
    <% else %>
      <%= link_to "Rejoindre l'Ã©vÃ©nement (paiement)", new_event_attendance_path(@event), class: "btn btn-primary" %>
    <% end %>
  <% end %>

<% else %>
  <!-- Non connectÃ© -->
  <p>Tu dois Ãªtre connectÃ© pour rejoindre cet Ã©vÃ©nement.</p>
  <%= link_to "Se connecter", new_user_session_path, class: "btn btn-outline-primary" %>
<% end %>
